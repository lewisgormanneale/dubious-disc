<div class="flex flex-col items-center p-4">
  <div class="max-w-screen-xl bg-zinc-950 rounded p-4">
    <ng-container *ngIf="pokemonSpecies && pokemonForms; else loading">
      <div class="flex flex-col items-center">
        <div class="flex flex-col items-center" style="max-width: 900px">
          <section class="w-full flex justify-between items-center mb-2">
            <div
              class="flex flex-col-reverse gap-2 sm:flex-row sm:items-center"
            >
              <a
                class="flex justify-evenly items-center h-10 w-16 rounded bg-zinc-700 cursor-pointer"
              >
                <ng-icon [name]="'heroChevronLeftSolid'"></ng-icon>
                <img
                  class="transition-all duration-300 ease-in-out"
                  [defaultImage]="'assets/images/question-icon.png'"
                  [lazyLoad]="previousPokemonImageUrl"
                  height="20"
                  width="20"
                />
              </a>
              <a
                class="flex justify-center items-center w-10 h-10 rounded bg-zinc-700 cursor-pointer"
                [routerLink]="['/pokedex/' + pokedexGeneration]"
                ><ng-icon [name]="'heroSwatchSolid'"></ng-icon
              ></a>
            </div>
            <div class="flex flex-col gap-3 sm:flex-row">
              <app-dropdown-link
                [placeholder]="'Pokedex Version'"
                [options]="pokedexDropdownOptions"
                [origin]="'right'"
              ></app-dropdown-link>
              <app-dropdown-link
                [placeholder]="'Select PokÃ©mon'"
                [options]="pokemonDropdownOptions"
                [origin]="'left'"
              ></app-dropdown-link>
            </div>
            <div
              class="flex flex-col gap-2 sm:flex-row sm:items-center items-end"
            >
              <a
                class="flex justify-center items-center w-10 h-10 rounded bg-zinc-700 cursor-pointer"
                ><ng-icon [name]="'bootstrapDice6Fill'"></ng-icon
              ></a>
              <a
                class="flex justify-evenly items-center h-10 w-16 rounded bg-zinc-700 cursor-pointer"
              >
                <img
                  class="transition-all duration-300 ease-in-out"
                  [defaultImage]="'assets/images/question-icon.png'"
                  [lazyLoad]="nextPokemonImageUrl"
                  height="20"
                  width="20"
                />
                <ng-icon [name]="'heroChevronRightSolid'"></ng-icon>
              </a>
            </div>
          </section>
          <section
            *ngIf="pokemonTypes && pokemonTypes.length > 0"
            class="flex flex-col md:flex-row items-center md:items-start gap-3 w-full"
          >
            <div
              class="text-center border border-zinc-800 w-full rounded flex flex-col justify-between"
            >
              <div class="relative h-full w-full">
                <button
                  class="absolute top-2 left-2 flex justify-center items-center w-10 h-10 rounded bg-zinc-700 cursor-pointer"
                  (click)="shinyToggle()"
                >
                  <ng-icon [name]="'heroSparklesSolid'"></ng-icon>
                </button>
                <img
                  src="{{ this.imageUrl }}"
                  class="w-full h-full object-contain min-w-[300px] rounded-t"
                  [style.background]="
                    pokemonTypes && pokemonTypes.length > 1
                      ? 'linear-gradient(to bottom right, #' +
                        pokemonTypes[0].type_id.type_color +
                        ',' +
                        '#' +
                        pokemonTypes[1].type_id.type_color +
                        ')'
                      : '#' + pokemonTypes[0].type_id.type_color
                  "
                />
              </div>
              <div>
                <div
                  class="bg-byzantium border-t border-zinc-800"
                  style="height: 50px"
                >
                  <h2 class="p-2">
                    <span class="white-outlined text-xl"
                      >#{{ pokemonSpecies.id }}</span
                    ><span class="font-sans-bold text-xl">
                      {{ selectedForm.name }}</span
                    >
                  </h2>
                </div>
                <div
                  class="flex justify-between items-center px-2 bg-zinc-800"
                  [ngClass]="
                    pokemonTypes.length > 1
                      ? 'justify-content-between'
                      : 'justify-content-center'
                  "
                  style="height: 50px"
                >
                  <app-type-box
                    *ngFor="let type of pokemonTypes"
                    [type]="type.type_id"
                  ></app-type-box>
                </div>
              </div>
            </div>
            <div
              class="flex flex-col justify-between w-full gap-3 rounded"
              *ngIf="selectedForm.id"
            >
              <app-pokemon-data
                [pokemon]="selectedForm"
                [pokemon_species]="pokemonSpecies"
              ></app-pokemon-data>
              <app-pokemon-stats
                [pokemon_id]="selectedForm.id"
              ></app-pokemon-stats>
            </div>
          </section>
          <section class="w-full my-3" *ngIf="pokemonForms.length > 1">
            <app-pokemon-forms
              (newSelectedForm)="handleNewSelectedForm($event)"
              [pokemonForms]="pokemonForms"
              [selectedForm]="selectedForm"
            ></app-pokemon-forms>
          </section>
          <section class="w-full my-3" *ngIf="pokemonSpecies.id">
            <app-pokemon-descriptions
              [pokemon_species_id]="pokemonSpecies.id"
            ></app-pokemon-descriptions>
          </section>
        </div>
      </div>
    </ng-container>
    <ng-template #loading>
      <div class="w-full">
        <app-spinner></app-spinner>
      </div>
    </ng-template>
  </div>
</div>
